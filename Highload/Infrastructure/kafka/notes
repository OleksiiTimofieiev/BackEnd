https://habr.com/ru/companies/otus/articles/725168/

- better to use JSON in messages
- topic is being used for message grouping
- uses FIFO

https://www.youtube.com/watch?v=BtmYjTO1EpI&list=PPSV

- message broker for big data
- more reliable then rabbitMq ?
- producer -> broker -> consumer [zookeeper]
- topic: array list
- replication: master slave, write only to leader, async delivered to slave
- master may die, and leader will be chosen -> async replication == some loss of data,
clean || unclean leader election
data will always be lost
leader even may be chosen if all is ok
- leader change without a loss:
request.required.acks = 1
request.required.acks = -1 => successfull write to all specific partitions
min.insync.replicas.per.topic = 2
some small overhead of producer,
way out:
incync.replicas = 2
replication factor = 3
- offset:
earliest - latest
how to save offset is main for the consumer
at least once
exactly once -> to save data in offsets in kafka atomically
- not always correctly distrubetes nodes
- better to monitor:
disks, network, scaling, leader selection, partition deferred, response time

-------

🍺  /opt/homebrew/Cellar/zookeeper/3.8.1: 1,103 files, 45.5MB
==> Installing kafka
==> Pouring kafka--3.4.0.arm64_ventura.bottle.tar.gz
==> Caveats
To restart kafka after an upgrade:
  brew services restart kafka
Or, if you don't want/need a background service you can just run:
  /opt/homebrew/opt/kafka/bin/kafka-server-start /opt/homebrew/etc/kafka/server.properties
==> Summary
🍺  /opt/homebrew/Cellar/kafka/3.4.0: 203 files, 101.5MB
==> Running `brew cleanup kafka`...
Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.
Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).
==> Caveats
==> kafka
To restart kafka after an upgrade:
  brew services restart kafka
Or, if you don't want/need a background service you can just run:
  /opt/homebrew/opt/kafka/bin/kafka-server-start /opt/homebrew/etc/kafka/server.properties